<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- SEO Default (akan dioverride oleh JS jika data ditemukan) -->
  <title id="page-title">Aneka Pustaka Multimedia</title>
  <meta name="description" id="meta-description" content="Penerbit, Percetakan, dan Distributor / Perdagangan Umum">
  <link rel="canonical" href="https://anekapustaka.github.io/anekapustakamultimedia/buku.html" id="canonical-link">

  <!-- âœ… Open Graph Default -->
  <meta property="og:title" content="CV Aneka Pustaka Multimedia" id="og-title">
  <meta property="og:description" content="Penerbit, Percetakan, dan Distributor / Perdagangan Umum" id="og-desc">
  <meta property="og:image" content="https://anekapustaka.github.io/anekapustakamultimedia/images/logocv.png" id="og-image">
  <meta property="og:url" content="https://anekapustaka.github.io/anekapustakamultimedia/buku.html" id="og-url">
  <meta property="og:type" content="product">
  <meta property="og:site_name" content="Aneka Pustaka Multimedia">

  <!-- âœ… Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="CV Aneka Pustaka Multimedia" id="twitter-title">
  <meta name="twitter:description" content="Penerbit, Percetakan, dan Distributor / Perdagangan Umum" id="twitter-desc">
  <meta name="twitter:image" content="https://anekapustaka.github.io/anekapustakamultimedia/images/logocv.png" id="twitter-image">

  <!-- âœ… Schema JSON-LD untuk Buku (Google akan baca ini) -->
  <script type="application/ld+json" id="schema-json">
  {
    "@context": "https://schema.org",
    "@type": "Book",
    "name": "CV Aneka Pustaka Multimedia",
    "image": "https://anekapustaka.github.io/anekapustakamultimedia/images/logocv.png",
    "publisher": {
      "@type": "Organization",
      "name": "Aneka Pustaka Multimedia"
    }
  }
  </script>

  <link rel="icon" type="image/png" href="images/logocv.png" sizes="32x32">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="index.css" />
  <link rel="stylesheet" href="styles/slider.css">
  <link rel="stylesheet" href="styles/bookcategory.css">
  <link rel="stylesheet" href="styles/bestseller.css">
  <link rel="stylesheet" href="styles/bukuterbit.css">
  <link rel="stylesheet" href="styles/form.css">
  <link rel="stylesheet" href="styles/faq.css">
  <link rel="stylesheet" href="styles/footer.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cardo&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
  
<body>
<!-- Header Section dimulai -->
<header class="main-header" role="banner">
  <div class="header-container">
    <div class="logo-text-container">
      <div class="logo-circle">
        <img src="images/logocv.png" alt="logo">
      </div>
      <div class="company-text">
        <h2>CV. ANEKA PUSTAKA MULTIMEDIA</h2>
        <h3>Penerbit, Percetakan, dan Distributor / Perdagangan Umum</h3>
      </div>
    </div>
    <input type="checkbox" id="menu-toggle" class="menu-toggle" />
    <label for="menu-toggle" class="hamburger-btn">
      <span></span>
      <span></span>
      <span></span>
    </label>
    <nav class="nav-menu">
      <a href="index.html">Beranda</a>
      <a href="services.html">Layanan</a>
      <a href="#">Artikel</a>
      <a href="#">Jurnal</a>
      <a href="etalase.html">Etalase</a>
      <a href="about.html">Tentang Kami</a>
    </nav>
  </div>
</header>


<!-- Detail Section dimulai -->
<section class="detail-section">
  <div class="detail-container">
    
    <div class="detail-image">
      <img id="cover-image" src="" alt="Memuat gambar..." style="opacity:0; transition:opacity .3s;">
      <div class="image-extra-text">
        <p><strong>CV. Aneka Pustaka Multimedia</strong> - Rumah bagi karya-karya inspiratif dan bacaan bermakna.</p>
      </div>

      <!-- âœ… Rekomendasi SEKARANG DI SINI (DI DALAM KOTAK BIRU) -->
      <div class="rekom-buku">
        <h5>Rekomendasi Buku Lainnya</h5>
        <div class="rekom-slider" id="rekom-slider"></div>
      </div>
    </div>

    <div class="detail-info">
      <h2 id="judul-buku" class="detail-title">Judul Buku</h2>
      <p class="detail-sold">ðŸ”–ISBN : <span id="isbn">-</span></p>
      <h3 id="harga-buku" class="detail-price">Rp. 0</h3>
      
      <div class="action-buttons" style="margin:15px 0;">
        <a id="btn-beli" href="#" class="btn btn-success" style="margin-right:10px;">
          <i class="fa-solid fa-cart-shopping"></i> Beli Sekarang
        </a>
        <button id="btn-share" class="btn btn-primary">
          <i class="fa-solid fa-share"></i> Bagikan
        </button>
      </div>

      <div class="detail-description">
        <p><strong>Penulis:</strong></p>
        <ol id="daftar-penulis"></ol>
        <p><strong>Editor:</strong> <span id="editor"></span></p>
        <p><strong>Ukuran:</strong> <span id="ukuran"></span></p>
        <p><strong>Halaman:</strong> <span id="halaman"></span></p>
        <p><strong>Tahun Terbit:</strong> <span id="tahun"></span></p>
        <hr>
        <p><strong>Sinopsis:</strong></p>
        <p id="sinopsis"></p>
      </div>
    </div>
  </div>
</section>


<!-- Footer Section dimulai -->
<footer class="footer">
  <div class="footer-container">
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-linkedin-in"></i></a>
    </div>
    <p class="footer-text">Â© 2025 Aneka Pustaka Multimedia - All Rights Reserved.</p>
  </div>
</footer>

<!-- Load data-buku -->
<script src="data-buku.js"></script>

<script>
if (window.dataBuku && !window.daftarBuku) {
  window.daftarBuku = window.dataBuku;
}

function getQueryParam(name) {
  return new URLSearchParams(window.location.search).get(name);
}

function updateSEO(book, id) {
  document.title = book.judul + " - Aneka Pustaka Multimedia";
  document.getElementById("meta-description").setAttribute("content", book.sinopsis.substring(0, 150));

  const fullURL = window.location.origin + "/buku.html?id=" + id;
  const imageURL = window.location.origin + "/images/" + book.gambar;

  document.getElementById("og-title").setAttribute("content", book.judul);
  document.getElementById("og-desc").setAttribute("content", book.sinopsis.substring(0, 150));
  document.getElementById("og-image").setAttribute("content", imageURL);
  document.getElementById("og-url").setAttribute("content", fullURL);

  document.getElementById("twitter-title").setAttribute("content", book.judul);
  document.getElementById("twitter-desc").setAttribute("content", book.sinopsis.substring(0, 150));
  document.getElementById("twitter-image").setAttribute("content", imageURL);
  document.getElementById("canonical-link").setAttribute("href", fullURL);

  const schema = {
    "@context": "https://schema.org",
    "@type": "Book",
    "name": book.judul,
    "image": imageURL,
    "description": book.sinopsis,
    "isbn": book.isbn || "-",
    "publisher": { "@type": "Organization", "name": "Aneka Pustaka Multimedia" }
  };
  document.getElementById("schema-json").textContent = JSON.stringify(schema);
}

function showNotFound() {
  document.getElementById('judul-buku').textContent = "Produk tidak ditemukan";
  document.getElementById('cover-image').src = "images/logocv.png";
}

function populate(book, id) {
  document.getElementById('judul-buku').textContent = book.judul;
  document.getElementById('isbn').textContent = book.isbn;
  document.getElementById('harga-buku').textContent = book.harga;
  document.getElementById('editor').textContent = book.editor;
  document.getElementById('ukuran').textContent = book.ukuran;
  document.getElementById('halaman').textContent = book.halaman;
  document.getElementById('tahun').textContent = book.tahun;
  document.getElementById('sinopsis').textContent = book.sinopsis;

  const list = document.getElementById('daftar-penulis');
  list.innerHTML = "";
  book.penulis.forEach(n => {
    const li = document.createElement('li');
    li.textContent = n;
    list.appendChild(li);
  });

  // Set tombol beli setelah buku dipopulate
  const btnBeli = document.getElementById("btn-beli");
  btnBeli.href = "form-pemesanan.html?buku=" + encodeURIComponent(book.judul);

  const cover = document.getElementById('cover-image');
  cover.style.opacity = "0";
  cover.onload = () => { cover.style.opacity = "1"; };
  cover.src = "images/" + book.gambar;
  cover.alt = book.judul;
  
// Slider Rekomendasi Buku
const slider = document.getElementById('rekom-slider');
if (slider && Array.isArray(window.daftarBuku)) {
  slider.innerHTML = ""; // kosongkan dulu

  const rekomBuku = window.daftarBuku.filter(b => b.id !== id).slice(0, 6);
  rekomBuku.forEach(b => {
    const img = document.createElement('img');
    img.src = 'images/' + b.gambar;
    img.alt = b.judul;
    img.title = b.judul;
    img.onclick = () => window.location.href = 'buku.html?id=' + encodeURIComponent(b.id);
    slider.appendChild(img);
  });
}
  
  updateSEO(book, id);
}

(function() {
  const id = getQueryParam('id');
  const buku = window.daftarBuku.find(b => b.id === id);
  if (!buku) {
    showNotFound();
    return;
  }
  populate(buku, id);

  document.getElementById("btn-share").addEventListener("click", () => {
    if (navigator.share) {
      navigator.share({
        title: buku.judul,
        text: "Cek buku ini: " + buku.judul,
        url: window.location.href
      });
    } else {
      alert("Fitur share tidak tersedia di browser ini.");
    }
  });
})();
</script>

</body>
</html>
